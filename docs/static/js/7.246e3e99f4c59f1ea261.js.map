{"version":3,"sources":["webpack:///./src/pages/mini-city/js/utils.js","webpack:///./src/pages/mini-city/js/Car.js","webpack:///./src/pages/mini-city/js/textures.js","webpack:///./src/pages/mini-city/config/treesPosition.js","webpack:///src/pages/mini-city/index.vue","webpack:///./src/pages/mini-city/index.vue?08bb","webpack:///./src/pages/mini-city/index.vue"],"names":["utils","makeShape","shape","window","THREE","arguments","length","arry","Shape","moveTo","i","lineTo","pathCoords","path","Path","holes","push","console","error","makeExtrudeGeometry","amount","extrudeSetting","steps","bevelEnabled","geometry","ExtrudeBufferGeometry","rotateX","Math","PI","makeShapeGeometry","shapeCoords","this","ShapeGeometry","makeMesh","type","color","material","mesh","MeshLambertMaterial","MeshPhongMaterial","Mesh","castShadow","receiveShadow","Car","colors","index","floor","random","Object3D","wheels","startAngle","that","makeWindow","coords","carBodyShape","carBodyGeometry","translate","carBody","add","addBody","carWindows","carWindowLeft","carWindowLeftFront","carWindowLeftBack","position","z","carWindowRight","clone","carWindowFrontGeometry","CubeGeometry","rotateZ","carWindowFront","carWindowBack","rotation","x","y","addWindows","carLightsGeometry","Geometry","carLigetGeometry","BoxGeometry","forEach","elem","merge","carLightFrontGeometry","scale","carLightBackGeometry","BufferGeometry","fromGeometry","carLights","addLights","wheelFrontLeft","createWheel","set","wheelFrontRight","wheelBackLeft","wheelBackRight","wheel","wheelOuterGeometry","CylinderGeometry","wheelOuter","wheelInner","wheelCenterGeometry","wheelCenter","addWheels","prototype","setPosition","forward","speed","_moving","backward","turnLeft","angle","_turn","turnRight","direction","originAngle","xLength","cos","zLength","sin","_rotateWheels","textures","canvas","document","createElement","ctx","getContext","width","height","fillStyle","fillRect","canvasTexture","Texture","wrapS","RepeatWrapping","wrapT","needsUpdate","treesPosition","mini_city","name","data","scene","camera","renderer","cars","config","isMobile","background","methods","checkUserAgent","n","navigator","userAgent","match","shadowMap","enabled","buildMovingCars","_this2","car","js_Car","r","buildStaticCars","_this3","buildRoad","road","roadBorderOuterShape","js_utils","roadBorderOuterGeometry","roadBorderOuter","roadBorderInnerShape","roadBorderInnnerGeometry","roadBoaderInnder","roadLinesGeometry","roadLineGeometry","roadLinesBottomGeometry","roadLinesTopGeometry","roadLinesLeftGeometry","rotateY","roadLinesRightGeometry","roadLines","buildbuilding","fenseShape","fenseGeometry","fense","greenShape","greenGeometry","green","hospital","_this","planeGeometry","BoxBufferGeometry","plane","config_treesPosition","tree","treeTrunkGeometry","treeTrunk","treeLeafsGeometry","treeLeafs","createTree","baseGeometry","base","frontMainShape","frontMainGeometry","frontMainMaterial","map","js_textures","repeat","frontMain","frontTopShape","frontTopGeometry","frontTop","frontRoofShelfGeometry","frontRoofShelfCubeGeometry","_i","_geometry","frontRoofShelfCubeYPosition","_i2","p","_geometry2","frontRoofShelf","frontPlatGeometry","fronPlat","frontPlatVerticalGeometry","frontPlatVertical","frontPlatVerticalWhiteGeometry","frontPlatVerticalWhite","frontPlatPillarGeometry","frontPlatPillar","frontPlatPillar2","frontBorderVerticles","frontBorderVerticleGeometry","frontBorderVerticleMesh","frontBorderVerticle1","frontBorderVerticle2","frontBorderVerticle3","frontRoofShape","frontRoofGeometry","frontRoof","backMainShape","backMainGeometry","backMain","backMiddleShape","backMiddkeGeometry","backMiddle","backMiddleWindowGeometry","PlaneGeometry","backMiddleWindowMaterial","backMiddleWindow","windowBackOrigin","windowObj","glassGeometry","glass","windowBorderGeometry","windowBorder","windowBorderTop","windowBorderBottom","windowBorderLeft","windowBorderRight","createWindow","_i3","j","createHospital","lamp","pillarGeomertry","pillar","connectGeometry","connect","lightGeometry","light","createLamp","buildLightSystem","hemisphereLight","HemisphereLight","_light","AmbientLight","directionalLight","DirectionalLight","target","d","shadow","OrthographicCamera","bias","mapSize","buildAuxSystem","gridHelper","GridHelper","controls","OrbitControls","domElement","enableDamping","dampingFactor","rotateSpeed","carMoving","onWindowResize","_this4","addEventListener","innerWidth","innerHeight","aspect","updateProjectionMatrix","setSize","loop","_this5","render","requestAnimationFrame","mounted","Scene","PerspectiveCamera","lookAt","WebGLRenderer","antialias","querySelector","setClearColor","PCFSoftShadowMap","pages_mini_city","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.246e3e99f4c59f1ea261.js","sourcesContent":["let utils = {\r\n    makeShape: function() {\r\n        let shape\r\n        if (window.THREE && arguments.length) {\r\n            let arry = arguments[0]\r\n            shape = new THREE.Shape()\r\n            shape.moveTo(arry[0][0], arry[0][1])\r\n            for (let i = 1; i < arry.length; i++) {\r\n                shape.lineTo(arry[i][0], arry[i][1])\r\n            }\r\n            if (arguments.length > 1) {\r\n                for (let i = 1; i < arguments.length; i++) {\r\n                    let pathCoords = arguments[i]\r\n                    let path = new THREE.Path()\r\n                    path.moveTo(pathCoords[0][0], pathCoords[0][1])\r\n                    for (let i = 1; i < pathCoords.length; i++) {\r\n                        path.lineTo(pathCoords[i][0], pathCoords[i][1])\r\n                    }\r\n                    shape.holes.push(path)\r\n                }\r\n            }\r\n            return shape\r\n        } else {\r\n            console.error('Something wrong!')\r\n        }\r\n    },\r\n    makeExtrudeGeometry: function(shape, amount) {\r\n        let extrudeSetting = {\r\n            steps: 1,\r\n            amount: amount,\r\n            bevelEnabled: false\r\n        }\r\n        let geometry = new THREE.ExtrudeBufferGeometry(shape, extrudeSetting)\r\n        geometry.rotateX(-0.5 * Math.PI)\r\n        return geometry\r\n    },\r\n    makeShapeGeometry: function(shapeCoords) {\r\n        let shape = this.makeShape(shapeCoords)\r\n        let geometry = new THREE.ShapeGeometry(shape)\r\n        return geometry\r\n    },\r\n    makeMesh: function(type, geometry, color) {\r\n        let material\r\n        let mesh\r\n        if (type === 'lambert') {\r\n            material = new THREE.MeshLambertMaterial({ color: color })\r\n        } else if (type === 'phong') {\r\n            material = new THREE.MeshPhongMaterial({ color: color })\r\n        } else {\r\n            console.error('unrecognized type!')\r\n        }\r\n\r\n        mesh = new THREE.Mesh(geometry, material)\r\n\r\n        mesh.castShadow = true\r\n        mesh.receiveShadow = true\r\n\r\n        return mesh\r\n\r\n    }\r\n}\r\n\r\nexport default utils\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/js/utils.js","'use strict'\r\nimport utils from './utils.js';\r\nconst Car = function(color) {\r\n    let colors = [0x2cbab2, 0x47a700, 0xd60000, 0x087f87, 0x37ad0e, 0x4d4d4d, 0xce7e00, 0xe0a213, 0x87bcde]\r\n    let index = Math.floor(Math.random() * colors.length)\r\n\r\n    this.color = color || colors[index]\r\n    this.mesh = new THREE.Object3D()\r\n    this.wheels = []\r\n    this.startAngle = 0\r\n\r\n    let that = this\r\n    addBody()\r\n    addWindows()\r\n    addLights()\r\n    addWheels()\r\n\r\n    function addWheels() {\r\n        let wheelFrontLeft = createWheel()\r\n        wheelFrontLeft.position.set(8, 3, -6)\r\n        that.wheels.push(wheelFrontLeft)\r\n        that.mesh.add(wheelFrontLeft)\r\n\r\n        let wheelFrontRight = createWheel()\r\n        wheelFrontRight.position.set(8, 3, 6)\r\n        that.wheels.push(wheelFrontRight)\r\n        that.mesh.add(wheelFrontRight)\r\n\r\n        let wheelBackLeft = createWheel()\r\n        wheelBackLeft.position.set(-8, 3, 6)\r\n        that.wheels.push(wheelBackLeft)\r\n        that.mesh.add(wheelBackLeft)\r\n\r\n        let wheelBackRight = createWheel()\r\n        wheelBackRight.position.set(-8, 3, -6)\r\n        that.wheels.push(wheelBackRight)\r\n        that.mesh.add(wheelBackRight)\r\n\r\n        function createWheel() {\r\n            let wheel = new THREE.Object3D()\r\n\r\n            let wheelOuterGeometry = new THREE.CylinderGeometry(3, 3, 3, 32)\r\n            wheelOuterGeometry.rotateX(0.5 * Math.PI)\r\n            let wheelOuter = utils.makeMesh('lambert', wheelOuterGeometry, 0x000000)\r\n            wheel.add(wheelOuter)\r\n\r\n            let wheelInner = utils.makeMesh('lambert', wheelOuterGeometry, 0xdddddd)\r\n            wheelInner.castShadow = false\r\n            wheelInner.scale.set(0.8, 0.8, 1.1)\r\n            wheel.add(wheelInner)\r\n\r\n            let wheelCenterGeometry = new THREE.CylinderGeometry(1, 1, 3.6, 4)\r\n            wheelCenterGeometry.rotateX(0.5 * Math.PI)\r\n            let wheelCenter = utils.makeMesh('lambert', wheelCenterGeometry, 0xa7a7a7)\r\n            wheelCenter.castShadow = false\r\n            wheel.add(wheelCenter)\r\n\r\n            return wheel\r\n        }\r\n    }\r\n\r\n    function addLights() {\r\n        let carLightsGeometry = new THREE.Geometry()\r\n        let carLigetGeometry = new THREE.BoxGeometry(2, 2, 2)\r\n\r\n        let carLightsPosition = [\r\n            [12.5, 7.1, 6.1],\r\n            [12.5, 7.1, -6.1],\r\n            [-14, 7.1, 6.1],\r\n            [-14, 7.1, -6.1]\r\n        ]\r\n        carLightsPosition.forEach(function(elem) {\r\n            let x = elem[0],\r\n                y = elem[1],\r\n                z = elem[2]\r\n            let geometry = carLigetGeometry.clone()\r\n            geometry.translate(x, y, z)\r\n            carLightsGeometry.merge(geometry)\r\n        })\r\n\r\n        let carLightFrontGeometry = carLigetGeometry.clone()\r\n        carLightFrontGeometry.scale(1, 1.3, 7.1)\r\n        carLightFrontGeometry.translate(12.1, 3.3, 0)\r\n        carLightsGeometry.merge(carLightFrontGeometry)\r\n\r\n        let carLightBackGeometry = carLightFrontGeometry.clone()\r\n        carLightBackGeometry.translate(-26, 0, 0)\r\n        carLightsGeometry.merge(carLightBackGeometry)\r\n\r\n        carLightsGeometry = new THREE.BufferGeometry().fromGeometry(carLightsGeometry)\r\n        let carLights = utils.makeMesh('phong', carLightsGeometry, 0xffffff)\r\n        that.mesh.add(carLights)\r\n\r\n    }\r\n\r\n    function addWindows() {\r\n        let carWindows = new THREE.Object3D()\r\n\r\n        let carWindowLeft = new THREE.Object3D()\r\n        let carWindowLeftFrontCoords = [\r\n            [-2, 8],\r\n            [4, 8],\r\n            [2.5, 12],\r\n            [-2, 12]\r\n        ]\r\n        let carWindowLeftFront = makeWindow(carWindowLeftFrontCoords)\r\n        carWindowLeft.add(carWindowLeftFront)\r\n\r\n        let carWindowLeftBackCoords = [\r\n            [-9, 8],\r\n            [-3, 8],\r\n            [-3, 12],\r\n            [-7.5, 12]\r\n        ]\r\n        let carWindowLeftBack = makeWindow(carWindowLeftBackCoords)\r\n        carWindowLeft.add(carWindowLeftBack)\r\n        carWindowLeft.position.z = 7.1\r\n        carWindows.add(carWindowLeft)\r\n\r\n        let carWindowRight = carWindowLeft.clone()\r\n        carWindowRight.position.z = -7.1\r\n        carWindows.add(carWindowRight)\r\n\r\n        let carWindowFrontGeometry = new THREE.CubeGeometry(0.1, 5, 12)\r\n        carWindowFrontGeometry.rotateZ(0.12 * Math.PI)\r\n        carWindowFrontGeometry.translate(4.2, 10, 0)\r\n        let carWindowFront = utils.makeMesh('phong', carWindowFrontGeometry, 0x000000)\r\n        carWindows.add(carWindowFront)\r\n\r\n        let carWindowBack = carWindowFront.clone()\r\n        carWindowBack.rotation.z = -0.24 * Math.PI\r\n        carWindowBack.position.x = -19\r\n        carWindowBack.position.y = 6\r\n        // carWindowFrontGeometry.translate(4.2,10,7)\r\n        carWindows.add(carWindowBack)\r\n\r\n        that.mesh.add(carWindows)\r\n    }\r\n\r\n    function addBody() {\r\n        let carBodyCoords = [\r\n            [-13, 2],\r\n            [13, 2],\r\n            [13, 8],\r\n            [5, 8],\r\n            [3, 13],\r\n            [-8, 13],\r\n            [-10, 8],\r\n            [-13, 8],\r\n            [-13, 2]\r\n        ]\r\n        let carBodyShape = utils.makeShape(carBodyCoords)\r\n        let carBodyGeometry = utils.makeExtrudeGeometry(carBodyShape, 14)\r\n        carBodyGeometry.translate(0, -7, 0)\r\n        carBodyGeometry.rotateX(0.5 * Math.PI)\r\n        let carBody = utils.makeMesh('phong', carBodyGeometry, that.color)\r\n        that.mesh.add(carBody)\r\n    }\r\n\r\n    function makeWindow(coords) {\r\n        let windowColor = 0x000000\r\n        let shape = utils.makeShape(coords)\r\n        let geometry = utils.makeExtrudeGeometry(shape, 0.1)\r\n        geometry.rotateX(0.5 * Math.PI)\r\n        let mesh = utils.makeMesh('phong', geometry, windowColor)\r\n        mesh.castShadow = false\r\n        return mesh\r\n    }\r\n}\r\nCar.prototype = {\r\n    setPosition: function(x, y, z) {\r\n        this.mesh.position.set(x, y, z)\r\n    },\r\n    forward: function(speed) {\r\n        speed = speed || 1\r\n        this._moving(speed, true)\r\n    },\r\n    backward: function(speed) {\r\n        speed = speed || 1\r\n        this._moving(speed, false)\r\n    },\r\n    turnLeft: function(angle, speed) {\r\n        this._turn(angle, true, speed)\r\n    },\r\n    turnRight: function(angle, speed) {\r\n        this._turn(angle, false, speed)\r\n    },\r\n    _turn: function(angle, direction, speed) {\r\n        direction = direction ? 1 : -1\r\n        if (speed) {\r\n            if (this.startAngle < angle) {\r\n                this.mesh.rotation.y += speed\r\n                this.startAngle += speed\r\n                if (angle - this.startAngle < speed) {\r\n                    let originAngle = this.mesh.rotation.y - this.startAngle\r\n                    this.mesh.rotation.y = originAngle + angle\r\n                    this.startAngle = 0\r\n                    return\r\n                }\r\n            }\r\n        } else {\r\n            this.mesh.rotation.y += angle * direction\r\n        }\r\n    },\r\n    _moving: function(speed, direction) {\r\n        let rotation = this.mesh.rotation.y\r\n        direction = direction ? 1 : -1\r\n        let xLength = speed * Math.cos(rotation) * direction,\r\n            zLength = speed * Math.sin(rotation) * direction\r\n        this.mesh.position.x += xLength\r\n        this.mesh.position.z -= zLength\r\n        this._rotateWheels(speed)\r\n    },\r\n    _rotateWheels: function(speed) {\r\n        this.wheels.forEach(function(elem) {\r\n            elem.rotation.z -= 0.1 * speed\r\n        })\r\n    }\r\n}\r\n\r\nexport default Car\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/js/Car.js","let textures = {\r\n    window: function() {\r\n        let canvas = document.createElement('canvas');\r\n        let ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = 32\r\n        canvas.height = 32\r\n\r\n        let colors = {\r\n            border: '#3c3443',\r\n            top: '#9d94a7',\r\n            bottom: '#796e8c'\r\n        }\r\n\r\n        ctx.fillStyle = colors.border\r\n        ctx.fillRect(0, 0, 32, 32)\r\n        ctx.fillStyle = colors.top\r\n        ctx.fillRect(2, 2, 13, 13)\r\n        ctx.fillStyle = colors.top\r\n        ctx.fillRect(17, 2, 13, 13)\r\n        ctx.fillStyle = colors.bottom\r\n        ctx.fillRect(2, 17, 13, 13)\r\n        ctx.fillStyle = colors.bottom\r\n        ctx.fillRect(17, 17, 13, 13)\r\n\r\n        let canvasTexture = new THREE.Texture(canvas)\r\n        canvasTexture.wrapS = THREE.RepeatWrapping;\r\n        canvasTexture.wrapT = THREE.RepeatWrapping;\r\n        canvasTexture.needsUpdate = true;\r\n\r\n        return canvasTexture;\r\n    }\r\n}\r\n\r\nexport default textures;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/js/textures.js","let treesPosition = [\r\n    [-110, -110],\r\n    [-90, -110],\r\n    [-70, -110],\r\n    [-50, -110],\r\n    [-30, -110],\r\n    [-10, -110],\r\n    [10, -110],\r\n    [30, -110],\r\n    [50, -110],\r\n    [70, -110],\r\n    [90, -110],\r\n    [-110, 110],\r\n    [-110, 90],\r\n    [-110, 70],\r\n    [-110, 50],\r\n    [-110, 30],\r\n    [-110, 10],\r\n    [-110, -10],\r\n    [-110, -30],\r\n    [-110, -50],\r\n    [-110, -70],\r\n    [-110, -90],\r\n    [110, 110],\r\n    [90, 110],\r\n    [70, 110],\r\n    [50, 110],\r\n    [30, 110],\r\n    [-30, 110],\r\n    [-50, 110],\r\n    [-70, 110],\r\n    [-90, 110],\r\n    [110, -110],\r\n    [110, -90],\r\n    [110, -70],\r\n    [110, -50],\r\n    [110, -30],\r\n    [110, -10],\r\n    [110, 10],\r\n    [110, 30],\r\n    [110, 50],\r\n    [110, 70],\r\n    [110, 90]\r\n]\r\nexport default treesPosition;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/config/treesPosition.js","<template>\r\n    <div class=\"container\">\r\n        <!-- <div class=\"info\">\r\n            <a class=\"title\" href=\"https://github.com/luosijie/threejs-examples\" target=\"_blank\">\r\n                Mini City\r\n            </a>\r\n            <a class=\"author\" href=\"https://luosijie.github.io/\" target=\"_blank\">\r\n                Created By Jesse Luo\r\n            </a>\r\n        </div> -->\r\n        <canvas/>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Car from './js/Car'\r\nimport textures from './js/textures.js'\r\nimport treesPosition from './config/treesPosition'\r\nimport utils from './js/utils.js'\r\nexport default {\r\n    name: 'HelloWorld',\r\n    data() {\r\n        return {\r\n            scene: null,\r\n            camera: null,\r\n            renderer: null,\r\n            cars: [],\r\n            width: '',\r\n            height: '',\r\n            config: {\r\n                isMobile: false,\r\n                background: 0x282828\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        checkUserAgent() {\r\n            let n = navigator.userAgent;\r\n            if (n.match(/Android/i) || n.match(/webOS/i) || n.match(/iPhone/i) || n.match(/iPad/i) || n.match(/iPod/i) || n.match(/BlackBerry/i)) {\r\n                this.config.isMobile = true\r\n                this.camera.position.set(420, 420, 420)\r\n                this.renderer.shadowMap.enabled = false\r\n            }\r\n        },\r\n        buildMovingCars() {\r\n            let carsPosition = [\r\n                [-130, 145, 0],\r\n                [10, 145, 0],\r\n                [145, 20, 0.5],\r\n                [30, -145, 1],\r\n                [-145, -60, 1.5]\r\n            ]\r\n            carsPosition.forEach(elem => {\r\n                let car = new Car()\r\n                let x = elem[0],\r\n                    z = elem[1],\r\n                    r = elem[2]\r\n                car.setPosition(x, 0, z)\r\n                car.mesh.rotation.y = r * Math.PI\r\n                this.cars.push(car)\r\n                this.scene.add(car.mesh)\r\n            })\r\n        },\r\n        buildStaticCars() {\r\n            let carsPosition = [\r\n                [-84, 82, 1.5],\r\n                [-58, 82, 1.5],\r\n                [-32, 82, 1.5],\r\n                [84, 82, 1.5]\r\n            ]\r\n            carsPosition.forEach(elem => {\r\n                let car = new Car()\r\n                let x = elem[0],\r\n                    z = elem[1],\r\n                    r = elem[2]\r\n                car.setPosition(x, 0, z)\r\n                car.mesh.rotation.y = r * Math.PI\r\n                this.scene.add(car.mesh)\r\n            })\r\n        },\r\n        buildRoad() {\r\n            let road = new THREE.Object3D()\r\n            let roadColor = 0xffffff\r\n            let roadBorderOuterCoords = [\r\n                [-160, 160],\r\n                [160, 160],\r\n                [160, -160],\r\n                [-160, -160]\r\n            ]\r\n            let roadBorderOuterHoleCoords = [\r\n                [-159, 159],\r\n                [-159, -159],\r\n                [159, -159],\r\n                [159, 159]\r\n            ]\r\n            let roadBorderOuterShape = utils.makeShape(roadBorderOuterCoords, roadBorderOuterHoleCoords)\r\n            let roadBorderOuterGeometry = utils.makeExtrudeGeometry(roadBorderOuterShape, 0.1)\r\n            let roadBorderOuter = utils.makeMesh('phong', roadBorderOuterGeometry, roadColor)\r\n            road.add(roadBorderOuter)\r\n\r\n            let roadBorderInnerCoords = [\r\n                [-131, 131],\r\n                [-131, -131],\r\n                [131, -131],\r\n                [131, 131],\r\n                [19, 131],\r\n                [19, 99],\r\n                [99, 99],\r\n                [99, -99],\r\n                [-99, -99],\r\n                [-99, 99],\r\n                [-19, 99],\r\n                [-19, 131]\r\n            ]\r\n            let roadBorderInnerShape = utils.makeShape(roadBorderInnerCoords)\r\n            let roadBorderInnnerGeometry = utils.makeExtrudeGeometry(roadBorderInnerShape, 0.1)\r\n            let roadBoaderInnder = utils.makeMesh('phong', roadBorderInnnerGeometry, roadColor)\r\n            roadBoaderInnder.rotation.y = Math.PI\r\n            road.add(roadBoaderInnder)\r\n\r\n            let roadLinesGeometry = new THREE.Geometry()\r\n            let roadLineGeometry = new THREE.BoxGeometry(20, 0.1, 2)\r\n\r\n            let roadLinesBottomGeometry = new THREE.Geometry()\r\n            for (let i = 0; i < 9; i++) {\r\n                let geometry = roadLineGeometry.clone()\r\n                geometry.translate(i * 30, 0, -1)\r\n                roadLinesBottomGeometry.merge(geometry)\r\n            }\r\n            roadLinesBottomGeometry.translate(-120, 0, 145)\r\n            roadLinesGeometry.merge(roadLinesBottomGeometry)\r\n\r\n            let roadLinesTopGeometry = roadLinesBottomGeometry.clone()\r\n            roadLinesTopGeometry.translate(0, 0, -290)\r\n            roadLinesGeometry.merge(roadLinesTopGeometry)\r\n\r\n            let roadLinesLeftGeometry = roadLinesBottomGeometry.clone()\r\n            roadLinesLeftGeometry.rotateY(0.5 * Math.PI)\r\n            roadLinesGeometry.merge(roadLinesLeftGeometry)\r\n\r\n            let roadLinesRightGeometry = roadLinesBottomGeometry.clone()\r\n            roadLinesRightGeometry.rotateY(-0.5 * Math.PI)\r\n            roadLinesGeometry.merge(roadLinesRightGeometry)\r\n            roadLinesGeometry = new THREE.BufferGeometry().fromGeometry(roadLinesGeometry)\r\n            let roadLines = utils.makeMesh('phong', roadLinesGeometry, roadColor)\r\n            road.add(roadLines)\r\n\r\n            this.scene.add(road)\r\n        },\r\n        buildbuilding() {\r\n            let _this = this;\r\n            let planeGeometry = new THREE.BoxBufferGeometry(320, 6, 320)\r\n            let plane = utils.makeMesh('lambert', planeGeometry, 0x6f5f6a)\r\n            plane.position.y = -3\r\n            this.scene.add(plane)\r\n\r\n            addFense()\r\n            addGreen()\r\n            addTrees()\r\n            addHospital()\r\n            addLamps()\r\n\r\n            function addLamps() {\r\n                let lampsPosition = [\r\n                    [-12.5, 12.5, 1.25],\r\n                    [-7.5, 12.5, -0.5],\r\n                    [-2.5, 12.5, -0.5],\r\n                    [2.5, 12.5, -0.5],\r\n                    [7.5, 12.5, -0.5],\r\n                    [12.5, 12.5, -0.25],\r\n                    [12.5, 7.5, 0],\r\n                    [12.5, 2.5, 0],\r\n                    [12.5, -2.5, 0],\r\n                    [12.5, -7.5, 0],\r\n                    [12.5, -12.5, 0.25],\r\n                    [7.5, -12.5, 0.5],\r\n                    [2.5, -12.5, 0.5],\r\n                    [-2.5, -12.5, 0.5],\r\n                    [-7.5, -12.5, 0.5],\r\n                    [-12.5, -12.5, 0.75],\r\n                    [-12.5, -7.5, 1],\r\n                    [-12.5, -2.5, 1],\r\n                    [-12.5, 2.5, 1],\r\n                    [-12.5, 7.5, 1]\r\n                ]\r\n\r\n                lampsPosition.forEach(function(elem) {\r\n                    let x = elem[0] * 10,\r\n                        z = elem[1] * 10,\r\n                        r = elem[2]\r\n                    let lamp = createLamp()\r\n                    lamp.rotation.y = r * Math.PI\r\n                    lamp.position.set(x, 0, z)\r\n                    _this.scene.add(lamp)\r\n                })\r\n            }\r\n\r\n            function addHospital() {\r\n                let hospital = createHospital()\r\n                hospital.position.z = -20\r\n                _this.scene.add(hospital)\r\n            }\r\n\r\n            function addGreen() {\r\n                let greenCoords = [\r\n                    [-120, -120],\r\n                    [-120, 120],\r\n                    [120, 120],\r\n                    [120, -120],\r\n                    [20, -120],\r\n                    [20, -100],\r\n                    [100, -100],\r\n                    [100, 100],\r\n                    [-100, 100],\r\n                    [-100, -100],\r\n                    [-20, -100],\r\n                    [-20, -120],\r\n                    [-120, -120]\r\n                ]\r\n                let greenShape = utils.makeShape(greenCoords)\r\n\r\n                let greenGeometry = utils.makeExtrudeGeometry(greenShape, 3)\r\n                let green = utils.makeMesh('lambert', greenGeometry, 0xc0c06a)\r\n                _this.scene.add(green)\r\n            }\r\n\r\n            function addFense() {\r\n                let fenseCoords = [\r\n                    [-130, -130],\r\n                    [-130, 130],\r\n                    [130, 130],\r\n                    [130, -130],\r\n                    [20, -130],\r\n                    [20, -120],\r\n                    [120, -120],\r\n                    [120, 120],\r\n                    [-120, 120],\r\n                    [-120, -120],\r\n                    [-20, -120],\r\n                    [-20, -130],\r\n                    [-130, -130]\r\n                ]\r\n                let fenseShape = utils.makeShape(fenseCoords)\r\n\r\n                let fenseGeometry = utils.makeExtrudeGeometry(fenseShape, 3)\r\n                let fense = utils.makeMesh('lambert', fenseGeometry, 0xe5cabf)\r\n                _this.scene.add(fense)\r\n            }\r\n\r\n            function addTrees() {\r\n                treesPosition.forEach(function(elem) {\r\n                    let x = elem[0],\r\n                        y = 1,\r\n                        z = elem[1]\r\n                    let tree = createTree(x, y, z)\r\n                    _this.scene.add(tree)\r\n                })\r\n            }\r\n\r\n            function createLamp() {\r\n                let lamp = new THREE.Object3D()\r\n                let pillarGeomertry = new THREE.CubeGeometry(2, 30, 2)\r\n                pillarGeomertry.translate(0, 15, 0)\r\n                let pillar = utils.makeMesh('phong', pillarGeomertry, 0xebd1c2)\r\n                lamp.add(pillar)\r\n\r\n                let connectGeometry = new THREE.CubeGeometry(10, 1, 1)\r\n                let connect = utils.makeMesh('phong', connectGeometry, 0x2c0e0e)\r\n                connect.position.set(3, 30, 0)\r\n                lamp.add(connect)\r\n\r\n                let lightGeometry = new THREE.CubeGeometry(6, 2, 4)\r\n                let light\r\n                light = utils.makeMesh('phong', lightGeometry, 0xebd1c2)\r\n                light.position.set(10, 30, 0)\r\n                lamp.add(light)\r\n\r\n                return lamp\r\n            }\r\n\r\n            function createHospital() {\r\n                let hospital = new THREE.Object3D()\r\n\r\n                let baseGeometry = new THREE.BoxBufferGeometry(180, 3, 140)\r\n                let base = utils.makeMesh('lambert', baseGeometry, 0xffffff)\r\n                base.position.y = 1\r\n                hospital.add(base)\r\n\r\n                let frontMainCoords = [\r\n                    [-80, -30],\r\n                    [-80, 20],\r\n                    [50, 20],\r\n                    [50, 0],\r\n                    [20, -30],\r\n                    [-80, -30]\r\n                ]\r\n                let frontMainShape = utils.makeShape(frontMainCoords)\r\n                let frontMainGeometry = utils.makeExtrudeGeometry(frontMainShape, 100)\r\n                let frontMainMaterial = new THREE.MeshPhongMaterial({ map: textures.window() })\r\n                frontMainMaterial.map.repeat.set(0.1, 0.08)\r\n                let frontMain = new THREE.Mesh(frontMainGeometry, frontMainMaterial)\r\n                frontMain.castShadow = true\r\n                frontMain.receiveShadow = true\r\n                hospital.add(frontMain)\r\n\r\n                let frontTopShape = frontMainShape\r\n                let frontTopGeometry = utils.makeExtrudeGeometry(frontTopShape, 5)\r\n                let frontTop = utils.makeMesh('lambert', frontTopGeometry, 0xb1a7af)\r\n                frontTop.position.y = 100\r\n                hospital.add(frontTop)\r\n\r\n                let frontRoofShelfGeometry = new THREE.Geometry()\r\n                let frontRoofShelfCubeGeometry = new THREE.BoxGeometry(2, 2, 40)\r\n                // for z-axis\r\n                for (let i = 0; i < 12; i++) {\r\n                    let geometry = frontRoofShelfCubeGeometry.clone()\r\n                    geometry.translate(i * 5, 0, 0)\r\n                    frontRoofShelfGeometry.merge(geometry)\r\n                }\r\n                // for x-axis\r\n                for (let i = 0; i < 2; i++) {\r\n                    let geometry = frontRoofShelfCubeGeometry.clone()\r\n                    geometry.rotateY(0.5 * Math.PI)\r\n                    geometry.scale(1.6, 1, 1)\r\n                    geometry.translate(27, 0, -15 + i * 30)\r\n                    frontRoofShelfGeometry.merge(geometry)\r\n                }\r\n                // for y-axis\r\n                let frontRoofShelfCubeYPosition = [\r\n                    [0, 0],\r\n                    [1, 0],\r\n                    [0, 1],\r\n                    [1, 1]\r\n                ]\r\n                for (let i = 0; i < frontRoofShelfCubeYPosition.length; i++) {\r\n                    let p = frontRoofShelfCubeYPosition[i]\r\n                    let geometry = frontRoofShelfCubeGeometry.clone()\r\n                    geometry.scale(1, 1, 0.4)\r\n                    geometry.rotateX(0.5 * Math.PI)\r\n                    geometry.translate(p[0] * 55, 0, -15 + p[1] * 30)\r\n                    frontRoofShelfGeometry.merge(geometry)\r\n                }\r\n                frontRoofShelfGeometry = new THREE.BufferGeometry().fromGeometry(frontRoofShelfGeometry)\r\n                let frontRoofShelf = utils.makeMesh('phong', frontRoofShelfGeometry, 0xffffff)\r\n                frontRoofShelf.position.set(-70, 115, 5)\r\n                hospital.add(frontRoofShelf)\r\n\r\n                let frontPlatGeometry = new THREE.BoxBufferGeometry(150, 3, 90)\r\n                let fronPlat = utils.makeMesh('lambert', frontPlatGeometry, 0x0792a5)\r\n                fronPlat.position.set(-3, 18, 25)\r\n                hospital.add(fronPlat)\r\n\r\n                let frontPlatVerticalGeometry = new THREE.BoxBufferGeometry(150, 15, 3)\r\n                let frontPlatVertical = utils.makeMesh('phong', frontPlatVerticalGeometry, 0x0792a5)\r\n                frontPlatVertical.receiveShadow = false\r\n                frontPlatVertical.position.set(-3, 24, 68.5)\r\n                hospital.add(frontPlatVertical)\r\n\r\n                let frontPlatVerticalWhiteGeometry = new THREE.BoxBufferGeometry(150, 3, 3)\r\n                let frontPlatVerticalWhite = utils.makeMesh('phong', frontPlatVerticalWhiteGeometry, 0xffffff)\r\n                frontPlatVerticalWhite.position.set(-3, 33, 68.5)\r\n                hospital.add(frontPlatVerticalWhite)\r\n\r\n                let frontPlatPillarGeometry = new THREE.CylinderGeometry(2, 2, 15, 32)\r\n                let frontPlatPillar = utils.makeMesh('lambert', frontPlatPillarGeometry, 0xffffff)\r\n                frontPlatPillar.position.set(-60, 10, 55)\r\n                hospital.add(frontPlatPillar)\r\n\r\n                let frontPlatPillar2 = frontPlatPillar.clone()\r\n                frontPlatPillar2.position.set(55, 10, 55)\r\n                hospital.add(frontPlatPillar2)\r\n\r\n                let frontBorderVerticles = new THREE.Object3D()\r\n                let frontBorderVerticleGeometry = new THREE.BoxBufferGeometry(4, 106, 4)\r\n                let frontBorderVerticleMesh = utils.makeMesh('phong', frontBorderVerticleGeometry, 0xffffff)\r\n                let frontBorderVerticle1 = frontBorderVerticleMesh.clone()\r\n                frontBorderVerticle1.position.set(-80, 52, 30)\r\n                frontBorderVerticles.add(frontBorderVerticle1)\r\n                let frontBorderVerticle2 = frontBorderVerticleMesh.clone()\r\n                frontBorderVerticle2.position.set(-80, 52, -20)\r\n                frontBorderVerticles.add(frontBorderVerticle2)\r\n                let frontBorderVerticle3 = frontBorderVerticleMesh.clone()\r\n                frontBorderVerticle3.position.set(50, 52, -18)\r\n                frontBorderVerticles.add(frontBorderVerticle3)\r\n                hospital.add(frontBorderVerticles)\r\n\r\n                let frontRoofCoords = [\r\n                    [-82, -32],\r\n                    [20, -32],\r\n                    [52, 0],\r\n                    [52, 22],\r\n                    [-82, 22],\r\n                    [-82, -32]\r\n                ]\r\n                let frontRoofHolePath = [\r\n                    [-78, -28],\r\n                    [20, -28],\r\n                    [48, 0],\r\n                    [48, 18],\r\n                    [-78, 18],\r\n                    [-78, -28]\r\n                ]\r\n                let frontRoofShape = utils.makeShape(frontRoofCoords, frontRoofHolePath)\r\n                let frontRoofGeometry = utils.makeExtrudeGeometry(frontRoofShape, 8)\r\n                let frontRoof = utils.makeMesh('phong', frontRoofGeometry, 0xffffff)\r\n                frontRoof.position.y = 100\r\n                hospital.add(frontRoof)\r\n\r\n                let backMainCoords = [\r\n                    [-80, 20],\r\n                    [-80, 60],\r\n                    [80, 60],\r\n                    [80, 20],\r\n                    [-80, 20]\r\n                ]\r\n                let backMainHolePath = [\r\n                    [-78, 22],\r\n                    [78, 22],\r\n                    [78, 58],\r\n                    [-78, 58],\r\n                    [-78, 22]\r\n                ]\r\n                let backMainShape = utils.makeShape(backMainCoords, backMainHolePath)\r\n\r\n                let backMainGeometry = utils.makeExtrudeGeometry(backMainShape, 90)\r\n                let backMain = utils.makeMesh('lambert', backMainGeometry, 0xf2e21b)\r\n                hospital.add(backMain)\r\n\r\n                let backMiddleCoords = [\r\n                    [0, 0],\r\n                    [36, 0],\r\n                    [36, 70],\r\n                    [0, 70],\r\n                    [0, 0]\r\n                ]\r\n                let backMiddleHolePath = [\r\n                    [2, 2],\r\n                    [34, 2],\r\n                    [34, 68],\r\n                    [2, 68],\r\n                    [2, 2]\r\n                ]\r\n                let backMiddleShape = utils.makeShape(backMiddleCoords, backMiddleHolePath)\r\n                let backMiddkeGeometry = utils.makeExtrudeGeometry(backMiddleShape, 165)\r\n                let backMiddle = utils.makeMesh('lambert', backMiddkeGeometry, 0xffffff)\r\n\r\n                backMiddle.rotation.x = -0.5 * Math.PI\r\n                backMiddle.rotation.z = -0.5 * Math.PI\r\n                backMiddle.position.y = 86\r\n                backMiddle.position.z = -58\r\n                backMiddle.position.x = -78\r\n                hospital.add(backMiddle)\r\n\r\n                let backMiddleWindowGeometry = new THREE.PlaneGeometry(32, 66, 1, 1)\r\n                let backMiddleWindowMaterial = new THREE.MeshPhongMaterial({ map: textures.window() })\r\n                backMiddleWindowMaterial.map.repeat.set(2, 6)\r\n\r\n                let backMiddleWindow = new THREE.Mesh(backMiddleWindowGeometry, backMiddleWindowMaterial)\r\n                backMiddleWindow.position.set(83, 51, -40)\r\n                backMiddleWindow.rotation.y = 0.5 * Math.PI\r\n                hospital.add(backMiddleWindow)\r\n\r\n                let windowBackOrigin = createWindow()\r\n                windowBackOrigin.scale.set(0.6, 0.6, 1)\r\n                windowBackOrigin.rotation.y = Math.PI\r\n                windowBackOrigin.position.set(65, 75, -61)\r\n                for (let i = 0; i < 7; i++) {\r\n                    for (let j = 0; j < 4; j++) {\r\n                        let windowObj = windowBackOrigin.clone()\r\n                        windowObj.position.x -= i * 22\r\n                        windowObj.position.y -= j * 20\r\n                        hospital.add(windowObj)\r\n                    }\r\n                }\r\n\r\n                return hospital\r\n            }\r\n\r\n            function createWindow() {\r\n                let windowObj = new THREE.Object3D()\r\n                let glassGeometry = new THREE.PlaneGeometry(20, 20)\r\n                let glass = utils.makeMesh('phong', glassGeometry, 0x6a5e74)\r\n                windowObj.add(glass)\r\n\r\n                let windowBorderGeometry = new THREE.BoxBufferGeometry(22, 2, 2)\r\n                let windowBorder = utils.makeMesh('phong', windowBorderGeometry, 0xffffff)\r\n\r\n                let windowBorderTop = windowBorder.clone()\r\n                windowBorderTop.position.y = 10\r\n                windowObj.add(windowBorderTop)\r\n\r\n                let windowBorderBottom = windowBorder.clone()\r\n                windowBorderBottom.position.y = -10\r\n                windowObj.add(windowBorderBottom)\r\n\r\n                let windowBorderLeft = windowBorder.clone()\r\n                windowBorderLeft.rotation.z = 0.5 * Math.PI\r\n                windowBorderLeft.position.x = -10\r\n                windowObj.add(windowBorderLeft)\r\n\r\n                let windowBorderRight = windowBorderLeft.clone()\r\n                windowBorderRight.position.x = 10\r\n                windowObj.add(windowBorderRight)\r\n\r\n                return windowObj\r\n            }\r\n\r\n            function createTree(x, y, z) {\r\n                x = x || 0\r\n                y = y || 0\r\n                z = z || 0\r\n\r\n                let tree = new THREE.Object3D()\r\n\r\n                let treeTrunkGeometry = new THREE.BoxBufferGeometry(2, 16, 2)\r\n                let treeTrunk = utils.makeMesh('lambert', treeTrunkGeometry, 0x8a613a)\r\n                treeTrunk.position.y = 8\r\n                tree.add(treeTrunk)\r\n\r\n                let treeLeafsGeometry = new THREE.BoxBufferGeometry(8, 8, 8)\r\n                let treeLeafs = utils.makeMesh('lambert', treeLeafsGeometry, 0x9c9e5d)\r\n                treeLeafs.position.y = 13\r\n                tree.add(treeLeafs)\r\n\r\n                tree.position.set(x, y, z)\r\n\r\n                return tree\r\n            }\r\n        },\r\n        buildLightSystem() {\r\n\r\n            if (!this.config.isMobile) {\r\n                let directionalLight = new THREE.DirectionalLight(0xffffff, 1.1);\r\n                directionalLight.position.set(300, 1000, 500);\r\n                directionalLight.target.position.set(0, 0, 0);\r\n                directionalLight.castShadow = true;\r\n\r\n                let d = 300;\r\n                directionalLight.shadow.camera = new THREE.OrthographicCamera(-d, d, d, -d, 500, 1600);\r\n                directionalLight.shadow.bias = 0.0001;\r\n                directionalLight.shadow.mapSize.width = directionalLight.shadow.mapSize.height = 1024;\r\n                this.scene.add(directionalLight)\r\n\r\n                let light = new THREE.AmbientLight(0xffffff, 0.3)\r\n                this.scene.add(light)\r\n            } else {\r\n                let hemisphereLight = new THREE.HemisphereLight(0xffffff, 1)\r\n                this.scene.add(hemisphereLight)\r\n\r\n                let light = new THREE.AmbientLight(0xffffff, 0.15)\r\n                this.scene.add(light)\r\n            }\r\n        },\r\n        // 构建辅助系统\r\n        buildAuxSystem() {\r\n            let gridHelper = new THREE.GridHelper(320, 32)\r\n            this.scene.add(gridHelper)\r\n\r\n            let controls = new THREE.OrbitControls(this.camera, this.renderer.domElement)\r\n            controls.enableDamping = true\r\n            controls.dampingFactor = 0.25\r\n            controls.rotateSpeed = 0.35\r\n        },\r\n        carMoving(car) {\r\n            let angle = car.mesh.rotation.y\r\n            let x = car.mesh.position.x,\r\n                z = car.mesh.position.z\r\n\r\n            if (x < 145 && z === 145) {\r\n                car.forward()\r\n            } else if (angle < 0.5 * Math.PI) {\r\n                car.turnLeft(0.5 * Math.PI, 0.1)\r\n            } else if (x === 145 && z > -145) {\r\n                car.forward()\r\n            } else if (angle < Math.PI) {\r\n                car.turnLeft(0.5 * Math.PI, 0.1)\r\n            } else if (x > -145 && z == -145) {\r\n                car.forward()\r\n            } else if (angle < 1.5 * Math.PI) {\r\n                car.turnLeft(0.5 * Math.PI, 0.1)\r\n            } else if (x === -145 && z < 145) {\r\n                car.mesh.rotation.y = 1.5 * Math.PI\r\n                car.forward()\r\n            } else if (angle < 2 * Math.PI) {\r\n                car.turnLeft(0.5 * Math.PI, 0.1)\r\n            } else {\r\n                car.setPosition(-145, 0, 145)\r\n                car.mesh.rotation.set(0, 0, 0)\r\n            }\r\n        },\r\n        onWindowResize() {\r\n            window.addEventListener('resize', () => {\r\n                this.width = window.innerWidth\r\n                this.height = window.innerHeight\r\n\r\n                this.camera.aspect = this.width / this.height;\r\n                this.camera.updateProjectionMatrix()\r\n\r\n                this.renderer.setSize(this.width, this.height)\r\n            })\r\n        },\r\n        loop() {\r\n            // stats.update()\r\n            this.cars.forEach(car => {\r\n                this.carMoving(car)\r\n            })\r\n            this.renderer.render(this.scene, this.camera)\r\n            requestAnimationFrame(this.loop)\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n        this.width = window.innerWidth\r\n        this.height = window.innerHeight\r\n\r\n        this.scene = new THREE.Scene()\r\n        this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 1, 5000)\r\n        this.camera.position.set(330, 330, 330)\r\n        this.camera.lookAt(this.scene.position)\r\n\r\n        this.renderer = new THREE.WebGLRenderer({ \r\n            antialias: true,\r\n            canvas: document.querySelector('canvas')\r\n        });\r\n        this.renderer.setSize(this.width, this.height)\r\n        this.renderer.setClearColor(this.config.background)\r\n        this.renderer.shadowMap.enabled = true\r\n        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap\r\n        // document.body.appendChild(this.renderer.domElement)\r\n\r\n        this.checkUserAgent()\r\n\r\n        // 搭建初始化场景\r\n        this.buildAuxSystem()\r\n        this.buildLightSystem()\r\n        // this.buildbuilding()\r\n        this.buildRoad()\r\n        // this.buildStaticCars()\r\n        // this.buildMovingCars()\r\n\r\n        this.loop()\r\n        this.onWindowResize()\r\n    }\r\n}\r\n\r\n</script>\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n    margin: 20px 0;\r\n    position: absolute;\r\n    text-align: center;\r\n    width: 100%;\r\n    .info {\r\n        opacity: 0.2;\r\n    }\r\n    a {\r\n        display: block;\r\n        font-size: 16px;\r\n        line-height: 28px;\r\n        color: #ffffff;\r\n        text-decoration: none;\r\n    }\r\n}\r\n\r\na.title {\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/mini-city/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('canvas')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-48185025\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/mini-city/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-48185025\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-48185025\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-48185025\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/mini-city/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}